% Adaptation of the "latex-presentation" sty file by pmichaillat
% Repository: https://github.com/pmichaillat/latex-presentation

% ---- Define Bielefeld University Green ----
\usepackage[dvipsnames]{xcolor}
\definecolor{BielefeldGreen}{RGB}{0,102,51}

% ---- Select text fonts -----

% Apply more sophisticated fonts
\usefonttheme{professionalfonts}

% Select text font
\usepackage{sourcesanspro}

% Define semibold font series
\DeclareRobustCommand{\sbseries}{\fontseries{sb}\selectfont}
\DeclareTextFontCommand{\textsb}{\sbseries}

% Select monospaced font
\usepackage{sourcecodepro}

% Select font encoding 
\usepackage[T1]{fontenc}

% Select URL font
\usepackage{url}

% QR codes
\usepackage{qrcode}
\usepackage[absolute,overlay]{textpos}  % for positioning QR code

% Define custom commands with complex argument specifications
\usepackage{xparse}

% ---- Select math fonts -----

% Select symbol font
\usepackage{MnSymbol}

% Select calligraphic and blackboard-bold fonts
\usepackage[cal=euler,bb=fourier]{mathalpha}

% Enable bold math characters
\newcommand{\hmmax}{0} % Avoid "Too many math alphabets" error
\newcommand{\bmmax}{0} % Avoid "Too many math alphabets" error
\usepackage{bm}

% Select font for Roman letters, Greek letters, digits, and punctuation
\usepackage[italic,eulergreek,nolessnomore,noparenthesis,noplusnominus,noequal,nohbar]{mathastext}

% Correct spacing around certain Roman letters
\MTsetmathskips{y}{2mu}{0mu}
\MTsetmathskips{j}{2mu}{0mu}

% ---- Select Beamer theme ----

% Select theme
\usetheme{Boadilla}

% Select color theme
\usecolortheme[]{seagull}

% Make covered elements transparent
\setbeamercovered{transparent}

% Remove navigation symbols
\setbeamertemplate{navigation symbols}{}

% ---- Adjust slide layout ----

% Set layout on title page
\setbeamertemplate{title page}[default][left,leftskip=-8pt]

% Set margins on regular pages
\setbeamersize{text margin left=5mm,text margin right=5mm}

% ---- Adjust spacing ----

% Set spacing between lines
\usepackage[onehalfspacing]{setspace}

% Set spacing on lines
\usepackage{microtype}

% Remove ligatures
\DisableLigatures[f]{encoding = *, family = * }

% ---- Adjust font sizes and shapes ----

% Set title font
\setbeamerfont{title}{size=\huge, series=\scshape}

% Set author font
\setbeamerfont{author}{size=\large}

% Set frame title font
\setbeamerfont{frametitle}{series=\scshape}

% Ensure uniform capitalization of frame title, and lower title
\setbeamertemplate{frametitle}{\vskip3mm\MakeLowercase{\insertframetitle}}

% Format continuation count for multipage slides
\setbeamertemplate{frametitle continuation}{[\insertcontinuationcount]}

% Set list font
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize} % Second level
\setbeamerfont{itemize/enumerate subsubbody}{size=\normalsize} % Third level

% Set theorem fonts
\setbeamerfont{block title}{series=\sbseries,size=\normalsize} % Title

% Set button font
\setbeamerfont{button}{size=\footnotesize}

% ---- Adjust colors ----

% Define colors
\colorlet{BlackGray}{black!85!}
\colorlet{DarkGray}{gray!60!}
\colorlet{LightGray}{gray!30!}

% Set title color
\setbeamercolor{title}{fg=BlackGray}

% Set frame title color
\setbeamercolor{frametitle}{fg=BlackGray}

% Set text color
\setbeamercolor{normal text}{fg=BlackGray}

% Set list items color
\setbeamercolor{itemize item}{fg=DarkGray} % Itemized list, first level
\setbeamercolor{itemize subitem}{fg=DarkGray}  % Itemized list, second level
\setbeamercolor{itemize subsubitem}{fg=DarkGray}  % Itemized list, third level
\setbeamercolor{enumerate item}{fg=DarkGray}  % Numbered list, first level
\setbeamercolor{enumerate subitem}{fg=DarkGray}  % Numbered list, second level
\setbeamercolor{enumerate subsubitem}{fg=DarkGray}  % Numbered list, third level

% Set theorem colors
\setbeamercolor{block title}{fg=BlackGray,bg=LightGray} % Title
\setbeamercolor{block body}{fg=BlackGray,bg=LightGray} % Body

% Set footer color
\setbeamercolor{footline}{fg=DarkGray}

% Set button colors
\setbeamercolor{button}{fg=DarkGray, bg=white}

% ---- Format title slide ----

% Set fonts for title and subtitle
\setbeamerfont{title}{size=\huge, series=\scshape}
\setbeamerfont{subtitle}{size=\huge, series=\scshape}

% Title capitalization and underline
\let\oldtitle\title
\renewcommand{\title}[1]{%
  \oldtitle[]{\MakeLowercase{#1}}%
}

% Subtitle formatting (lowercased only â€” spacing now handled in title page template)
\let\oldsubtitle\subtitle
\renewcommand{\subtitle}[1]{%
  \oldsubtitle[]{\MakeLowercase{#1}}%
}

% QR code link
\newcommand{\slidelink}[1]{\def\insertslidelink{#1}}

% Custom title page template with tighter spacing
\setbeamertemplate{title page}{
  \vbox{}
  \vfill
  \begin{flushleft}
    {\usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\par}
    \vspace{0.3em}
    {\color{BlackGray}\rule{\textwidth}{1pt}\par}
    \vspace{0.3em}
    {\usebeamerfont{subtitle}\usebeamercolor[fg]{title}\insertsubtitle\par}
    \vspace{1cm}
    {\usebeamerfont{author}\insertauthor\par}
    \vskip0.5em
    {\insertdate\par}
  \end{flushleft}

  % QR code in bottom right (smaller)
  \begin{textblock*}{2cm}(0.88\paperwidth,0.83\paperheight)
    \vspace{-1em}
    \qrcode[height=1.4cm]{\insertslidelink}
  \end{textblock*}

  \vfill
}

% ---- Format lists ----

% Format itemized lists
\setbeamertemplate{itemize item}{\textbullet} % First-level item
\setbeamertemplate{itemize subitem}{\textendash} % Second-level item
\setbeamertemplate{itemize subsubitem}{\textsquare} % Third-level item

% Format numbered lists
\setbeamertemplate{enumerate item}[default] % First-level item
\setbeamertemplate{enumerate subitem}{\alph{enumii}.} % Second-level item
\setbeamertemplate{enumerate subsubitem}{\roman{enumiii}.} % Third-level item

% ---- Create text alerts ----

% Standard alert (using Bielefeld University green instead of RubineRed)
\NewDocumentCommand{\al}{o g}{%
  \IfNoValueTF{#1}{\textcolor{BielefeldGreen}{#2}}%
  {\textcolor<#1>{BielefeldGreen}{#2}}%
}

% Green, positive alert
\NewDocumentCommand{\alg}{o g}{%
  \IfNoValueTF{#1}{\textcolor{Green}{#2}}%
  {\textcolor<#1>{Green}{#2}}%
}

% Red, negative alert
\NewDocumentCommand{\alr}{o g}{%
  \IfNoValueTF{#1}{\textcolor{Red}{#2}}%
  {\textcolor<#1>{Red}{#2}}%
}

% Blue, zero alert
\NewDocumentCommand{\alb}{o g}{%
  \IfNoValueTF{#1}{\textcolor{NavyBlue}{#2}}%
  {\textcolor<#1>{NavyBlue}{#2}}%
}

% ---- Format figures and tables ----

% Enhance table formatting
\usepackage{booktabs}

% Enable multiple rows in table
\usepackage{multirow}

% Customize captions
\usepackage{caption}

% Format captions
\captionsetup{labelformat=empty,size=normalsize}

% Center figures
\let\oldincludegraphics\includegraphics 
\renewcommand{\includegraphics}[2][]{\centering\oldincludegraphics[#1]{#2}}

% ---- Format theorems ----

\setbeamertemplate{blocks}[rounded][shadow=false]

% Define new theorems
\newtheorem{proposition}{Proposition}
\newtheorem{assumption}{Assumption}
\newtheorem{remark}{Remark}

% ---- Create section slide ----

% Increase section slide title size (from \LARGE to \Huge)
\newcommand{\heading}[1]{\Huge\scshape\color{BlackGray}\singlespacing\MakeLowercase{#1}}

% ---- Create last slide ----

\newcommand{\lastslide}{{\setbeamercolor{normal text}{bg=LightGray}\begin{frame}\end{frame}}}

% ---- Define shortcuts for pictograms ----

\newcommand{\up}{\textuparrow\,}
\newcommand{\down}{\textdownarrow\,}
\renewcommand{\flat}{\textrightarrow\,}
\newcommand{\then}{$\rightsquigarrow\,$}
\newcommand{\so}{{$\Rightarrow\,$}}

% ---- Remove or insert slide numbers ----

% Remove slide numbers by default
\setbeamertemplate{footline}{}

% Uncomment the line below to insert slide numbers
\setbeamertemplate{footline}[frame number]

% custom environments
\newenvironment{wideitemize}{\itemize\addtolength{\itemsep}{0.5em}}{\enditemize}
\newenvironment{wideenumerate}{\enumerate\addtolength{\itemsep}{0.5em}}{\endenumerate}
\newcommand{\dash}{\setlength\itemindent{15pt}\item[$\rightarrow$]\setlength\itemindent{0pt}}
\newcommand{\subitem}{%
  \setlength{\itemsep}{0pt}%
  \setlength{\parsep}{0pt}%
  \setlength{\topsep}{0pt}%
  \setlength\itemindent{15pt}%
  \item
  \setlength\itemindent{0pt}%
}
